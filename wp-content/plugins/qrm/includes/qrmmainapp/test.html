<html>
<body>
    <script>
        
        function Map() {
    // members
    this.keyArray = new Array();
    // Keys
    this.valArray = new Array();
    // Values
    this.put = function (key, val) {
        var elementIndex = this.findIt(key);
        if (elementIndex == (-1)) {
            this.keyArray.push(key);
            this.valArray.push(val);
        } else {
            this.valArray[elementIndex] = val;
        }
    };
    this.get = function (key) {
        var result = null;
        var elementIndex = this.findIt(key);
        if (elementIndex != (-1)) {
            result = this.valArray[elementIndex];
        }
        return result;
    };
    this.remove = function (key) {
        var elementIndex = this.findIt(key);
        if (elementIndex != (-1)) {
            this.keyArray = this.keyArray.removeAt(elementIndex);
            this.valArray = this.valArray.removeAt(elementIndex);
        }
        return;
    };
    this.size = function () {
        return (this.keyArray.length);
    };
    this.clear = function () {
        while (this.keyArray.length > 0) {
            this.keyArray.pop();
            this.valArray.pop();
        }
    };
    this.keySet = function () {
        return (this.keyArray);
    };
    this.valSet = function () {
        return (this.valArray);
    };
    this.showMe = function () {
        var result = "";
        for (var i = 0; i < this.keyArray.length; i++) {
            result += "Key: " + this.keyArray[i] + "\tValues: " + this.valArray[i] + "\n";
        }
        return result;
    };
    this.findIt = function (key) {
        var result = (-1);
        for (var i = 0; i < this.keyArray.length; i++) {
            if (this.keyArray[i] == key) {
                result = i;
                break;
            }
        }
        return result;
    };
    this.removeAt = function (index) {
        var part1 = this.slice(0, index);
        var part2 = this.slice(index + 1);
        return (part1.concat(part2));
    };

}

        
        var projects = [{
                title: "Projct 1",
                id: 1,
                parent_id: 0
        }, {
            title: "Projct 2",
            id: 2,
            parent_id: 12
        }, {
            title: "Projct 3",
            id: 3,
            parent_id: 1
        }, {
            title: "Projct 4",
            id: 4,
            parent_id: 3
        }, ];

        var projMap = new Map();

        projects.forEach(function (e) {
            projMap.put(e.id, e);
        });
        
        var projArr = new Array();
        projects.forEach(function (e) {
            if (projMap.findIt(e.parent_id) > -1){
                parent = projMap.get(e.parent_id);
                if (parent.children == null){
                    parent.children = new Array();
                }
                parent.children.push(e);
            } else {
                projArr.push(e);
            }
        });
        
        debugger;
        
        alert ("done");
        
        
                        
         
    </script>
</body>

</html>